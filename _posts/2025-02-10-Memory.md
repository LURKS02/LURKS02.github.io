---
layout: post
title: 'vmmapκ³Ό SILλ¥Ό ν†µν• νƒ€μ…λ³„ λ©”λ¨λ¦¬ λ¶„μ„'
categories: swift
---


## vmmapμ„ ν™μ©ν• λ©”λ¨λ¦¬ λ¶„μ„

κ°’ νƒ€μ…, μ°Έμ΅° νƒ€μ…μ— λ€ν•΄ κ³µλ¶€λ¥Ό ν•λ‹¤ λ³΄λ‹ λ©”λ¨λ¦¬κ°€ μ‹¤μ λ΅ Heap μμ—­μ— μ“°μ—¬μ§€λ”μ§€, λλ” Stack μμ—­μ— μ“°μ—¬μ§€λ”μ§€ κ¶κΈμ¦μ΄ μƒκ²Όμµλ‹λ‹¤.<br>
λ”°λΌμ„ vmmapμ„ ν™μ©ν•΄μ„ μΈμ¤ν„΄μ¤κ°€ μƒμ„±λ  λ• μ–΄λ–¤ μμ—­μ— μ €μ¥λλ”μ§€, μ–΄λ–¤ μΌμ΄ μΌμ–΄λ‚λ”μ§€ λ¶„μ„ν•΄λ³΄κΈ°λ΅ ν•μ€μµλ‹λ‹¤.<br>

[μ°Έκ³ ] κΉ€μ •λ‹κ³Ό κΉ€μΆ…κ¶λ‹μ΄ μ‘μ„±ν•μ‹  κΈ€μ„ μ°Έκ³ ν•μ—¬ μ§„ν–‰ν–μµλ‹λ‹¤. π™‚<br>
 
[[Jung Kim λ‹ λΈ”λ΅κ·Έ: μ¤μ„ν”„νΈ νƒ€μ…λ³„ λ©”λ¨λ¦¬ λ¶„μ„ μ‹¤ν—]](https://medium.com/@jungkim/%EC%8A%A4%EC%9C%84%ED%94%84%ED%8A%B8-%ED%83%80%EC%9E%85%EB%B3%84-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%B6%84%EC%84%9D-%EC%8B%A4%ED%97%98-4d89e1436fee)

[[κΉ€μΆ…κ¶ λ‹ λΈ”λ΅κ·Έ: Swift λ©”λ¨λ¦¬ ν• λ‹Ή]](https://ios-development.tistory.com/1462)

<br>

## 1. vmmap μ΄λ€?
vmmapμ€ macOSμ—μ„ νΉμ • ν”„λ΅μ„Έμ¤μ λ©”λ¨λ¦¬ λ§µμ„ ν™•μΈν•  μ μκ² ν•΄μ£Όλ” λ…λ Ήμ–΄μ…λ‹λ‹¤.<br>
μ΄ λ…λ Ήμ–΄λ¥Ό ν†µν•΄ ν”„λ΅μ„Έμ¤κ°€ μ‚¬μ©ν•λ” λ©”λ¨λ¦¬ μμ—­μ„ μƒμ„Έν•κ² ν™•μΈν•  μ μμµλ‹λ‹¤.<br>
```
vmmap <PID>
```

![image](https://github.com/user-attachments/assets/28873cee-97c2-461a-8b42-ae377325e086)

vmmapμ„ ν†µν•΄ ν™•μΈν• ν”„λ΅μ„Έμ¤μ λ©”λ¨λ¦¬ μμ—­μ…λ‹λ‹¤.<br>
μμ„Έν λ³΄λ©΄ TEXT, DATA, STACK, MALLOC λ“± λ‹¤μ–‘ν• μμ—­λ“¤μ λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>

<br>

## 2. κ°’ νƒ€μ… μ£Όμ† μ½κΈ°
κ°’ νƒ€μ…μ λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό μ°Έμ΅°ν•κΈ° μ„ν•΄μ„ withUnsafePointer(to:)λ¥Ό μ‚¬μ©ν–μµλ‹λ‹¤.<br>
μ΄ λ©”μ„λ“λ¥Ό ν™μ©ν•΄μ„ κ°’ νƒ€μ…μ λ©”λ¨λ¦¬ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤.<br>
UnsafeMutablePointerμ™€μ μ°¨μ΄μ μ€ κ°’μ„ λ³€κ²½ν•  μ μλλƒ μ—†λλƒμ μ°¨μ΄μ…λ‹λ‹¤.<br>

<img src="https://github.com/user-attachments/assets/16006604-1a29-422e-86cc-99e563d15170" width=400>

μ΄λ ‡κ² μ•μ•„λ‚Έ ν¬μΈν„°λ¥Ό μ¶λ ¥ν•΄λ³΄λ©΄ 16μ§„μλ΅ ν‘ν„λ λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό μ–»μ„ μ μμµλ‹λ‹¤.<br>

<br>

## 3. κ°’ νƒ€μ…μ ν™ μμ—­ μ£Όμ† μ½κΈ°
UnsafeRawPointerλ” νƒ€μ… μ •λ³΄κ°€ μ—†λ” ν¬μΈν„°λ΅, μ§μ ‘ κ°’μ„ ν•΄μ„ν•  μ μ—†μµλ‹λ‹¤.<br>
μ΄λ¥Ό μ‚¬μ©ν•λ©΄ λ¬Έμμ—΄μ²λΌ ν™ μμ—­μ— μ €μ¥λλ” μ£Όμ†λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.<br>

<br>

## 4. Int νƒ€μ… ν™•μΈν•κΈ°
```swift
var A = 10
A = 123456789012345
```
μ°μ„  Intκ°€ μ–΄λ–»κ² ν‘ν„λλ”μ§€ ν™•μΈν•΄λ³΄κ² μµλ‹λ‹¤.<br>
κ°’μ„ λ³€κ²½ν•λ”λΌλ„ μ¤νƒ μ£Όμ†κ°’μ€ λ™μΌν•κ³ , μ΄λ¥Ό ν™•μΈν•΄λ³΄λ©΄ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.<br>

<img width="783" alt="α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2025-02-12 α„‹α…©α„’α…® 12 02 53" src="https://github.com/user-attachments/assets/72d06814-f07e-46ce-8288-0d115d95e151" />

μ²« λ²μ§Έ κ°’μ€ 10μΌλ΅, μ΄λ” 0aλ΅ ν‘ν„λμ—μµλ‹λ‹¤.<br>
λ‘ λ²μ§Έ κ°’μ€ 123456789012345μΈλ°, μ¤νƒμ— μ €μ¥λ 8λ°”μ΄νΈλ¥Ό ν™•μΈν•λ©΄ 0x00007048860ddf79, μ¦‰ 123456789012345λΌλ” κ°’μ„ ν‘ν„ν•κ³  μμµλ‹λ‹¤.<br>


```swift
var A = 1
var B = A
...
B = 3
...
A = 3
```
λ‹¤μκ³Ό κ°™μ΄ Int νƒ€μ… λ‘ κ°λ¥Ό μ •μν• λ’¤, κ°’μ„ ν• λ‹Ή, λ³µμ‚¬, λ³€κ²½ν•΄μ¤„ λ• λ©”λ¨λ¦¬ μ£Όμ†μ λ³€ν™”λ¥Ό κ΄€μ°°ν•μ€μµλ‹λ‹¤. (κΉ€μ •λ‹κ»μ„ ν•μ‹  μ‹¤ν—μ„ μ¬ν„ν–μµλ‹λ‹¤.)<br>

![image](https://github.com/user-attachments/assets/f6513a49-1190-49b7-9a56-1b630f53800f)

μ¤νƒμ λ©”λ¨λ¦¬ λ²”μ„λ” 0x000000016f604000 ~ 0x000000016fe00000 μ…λ‹λ‹¤.<br>

<img src="https://github.com/user-attachments/assets/604125d7-7d9d-43c0-b315-2e2cd5d19726" width=400>

μ¶λ ¥ κ²°κ³Όλ” μ„μ™€ κ°™μ€λ°, μ΄λ¥Ό ν†µν•΄ λ‘ κ°’μ΄ λ¨λ‘ μ¤νƒ μμ—­μ— ν• λ‹Ήλμ—μμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/2f5d74d0-b1bb-4d9a-92c7-bf11ae57c16b)

λν• lldbμ— memory readλ¥Ό μ…λ ¥ν•λ©΄ 32λ°”μ΄νΈκ°€ μ¶λ ¥λλ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>
μ΄λ” νΉμ • λ©”λ¨λ¦¬ μ£Όμ†μ λ‚΄μ©μ„ μ¶λ ¥ν•λ” κ²ƒμΌλ΅, λ©”λ¨λ¦¬ μ£Όμ†μ— λ€ν•΄ μ €μ¥λ λ°μ΄ν„°κ°€ μ¶λ ¥λ©λ‹λ‹¤.<br>
μ΄λ• ν• μ¤„μ— 1λ°”μ΄νΈ 16κ°κ°€ μ¶λ ¥λλ”λ°, μ«μ μ λ‹Ή 1λ°”μ΄νΈλ¥Ό μλ―Έν•©λ‹λ‹¤. (16μ§„μμ΄λ―€λ΅ κ° μλ¦¬κ°€ 4bitλ¥Ό ν‘ν„ν•  μ μμµλ‹λ‹¤.)<br>
μ΄λ¥Ό ν™•μΈν•΄λ³΄λ©΄ Int νƒ€μ…μ€ 8λ°”μ΄νΈμ΄κ³ , λ©”λ¨λ¦¬ μƒμ—μ„ μ—°μ†μ μΈ μ£Όμ†μ— μ €μ¥λ κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>

<br>

## 4. String νƒ€μ… ν™•μΈν•κΈ°
```swift
var str1 = "AAAA"
str1 = "AAAAAAAAAA"
str1 = "ADJISJDLDNFLSKFMNDLS"
var str2 = str1
str2 = "AAAA"
```
Stringμ κ²½μ°λ” μ„μ™€ κ°™μ΄ μ‹λ‚λ¦¬μ¤λ¥Ό μ‘μ„±ν•μ—¬ ν…μ¤νΈ ν•΄λ³΄μ•μµλ‹λ‹¤. (κΉ€μ •λ‹κ»μ„ ν•μ‹  μ‹¤ν—μ„ μ¬ν„ν–μµλ‹λ‹¤2)<br>

![image](https://github.com/user-attachments/assets/81201bf0-efc2-4805-81b2-bffd88e20614)

![image](https://github.com/user-attachments/assets/176fdb69-9332-4f78-896e-45bf4f1ffddd)

μ¶λ ¥λ μ£Όμ†λ“¤μ„ λ©”λ¨λ¦¬ μ£Όμ†μ— λ§μ¶°λ³΄λ©΄ Stringμ κ²½μ° μ¤νƒ μμ—­μ— κ³µκ°„μ„ ν• λ‹Ήλ°›μΌλ©΄μ„λ„ ν™ μμ—­μ„ μ‚¬μ©ν•κ³  μλ” κ²ƒμ„ μ• μ μμµλ‹λ‹¤.<br>
μ—¬κΈ°μ„ μ‚¬μ©λλ” κ³µκ°„μΈ MALLOC_NANOλ” μ„±λ¥ μµμ ν™”λ¥Ό μ„ν• κ³µκ°„μΌλ΅ μ „μ© λ©”λ¨λ¦¬ κ³µκ°„μ„ λ―Έλ¦¬ ν• λ‹Ήν•μ—¬ μ•„μ£Ό μ‘μ€ κ°μ²΄λ¥Ό λΉ λ¥΄κ² ν• λ‹Ήν•κ³  ν•΄μ ν•  μ μλ” μμ—­μ΄λΌκ³  ν•©λ‹λ‹¤.<br>
μ΄λ• κ°€μƒ μ£Όμ† κ³µκ°„μ„ λ―Έλ¦¬ ν™•λ³΄ν•κΈ° λ•λ¬Έμ— κΈ°μ΅΄μ Heap μμ—­κ³Ό κ²ΉμΉμ§€ μ•λ” λ†’μ€ μ£Όμ†λ¥Ό OSκ°€ μμ•½ν•΄μ„ μ‚¬μ©ν•λ‹¤κ³  ν•λ„¤μ”. π™‚<br>

![image](https://github.com/user-attachments/assets/11ac2e11-0bf1-4b88-a68f-13d14a01593d)

λ§¨ μ²μ str1μ— AAAAλ¥Ό λ€μ…ν•  λ•λ” μ¤νƒ κ³µκ°„μ—μ„ κ°’μ΄ λ³΄μ—¬μ§‘λ‹λ‹¤. <br>

![image](https://github.com/user-attachments/assets/6cecc539-4ad7-46d4-9916-7740d69dddec)

μ΄λ¥Ό μΆ€ λ” κΈ΄ λ¬Έμμ—΄λ΅ λ°”κΏ” λ€μ…ν–μ„ λ•λ„ λ§μ°¬κ°€μ§€μ…λ‹λ‹¤. <br>

![image](https://github.com/user-attachments/assets/87c23556-f33c-4490-a66d-6a4028bf418a)

μ΄λ³΄λ‹¤ λ” κΈ΄ λ¬Έμμ—΄λ΅ ν• λ‹Ήν•μ μ¤νƒ μμ—­μ΄ μ•„λ‹ Heap μμ—­μ— κ°’μ„ μ €μ¥ν• κ²ƒμΌλ΅ λ³΄μ…λ‹λ‹¤.<br>
κ°’μ΄ Heapμ— μλ‹¤λ©΄ λ¬Έμμ—΄μ„ λ³µμ‚¬ν•  λ•λ„ μ°Έμ΅°λ¥Ό λ³µμ‚¬ν•κ² λ κΉμ”?<br>

<img src="https://github.com/user-attachments/assets/d215005d-775a-42b7-af6b-18908bc6dd9a" width=400>

μƒλ΅μ΄ λ³€μ str2λ” str1μ κ°’μ„ κ·Έλ€λ΅ λ³µμ‚¬ν•μ€μµλ‹λ‹¤.<br>
κ·Έλ°λ° μ΄λ• Stack μμ—­μ€ μƒλ΅­κ² ν• λ‹Ήλ°›μ§€λ§, Heap μμ—­μ€ str1μ μ£Όμ†μ™€ λ™μΌν• μ£Όμ†λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ„ ν™•μΈν•  μ μμ—μµλ‹λ‹¤. (μ΄ λ™μ‘μ€ Copy-on-write λ•λ¬Έμ— λ°μƒν•λ” ν„μƒμ…λ‹λ‹¤.)<br>

[μ°Έκ³ ] μ‹¤ν–‰ν•  λ•λ§λ‹¤ κ°’μ΄ κ³µμ λ  λ•λ„ μκ³  μ•„λ‹ λ•λ„ μμ–΄, κ°’μ΄ λ κ³µμ λλ” κ²ƒμ€ μ•„λ‹ κ²ƒ κ°™μµλ‹λ‹¤.

<br>

![image](https://github.com/user-attachments/assets/672ebfc5-ae55-4536-b7f6-1675ff2dcb2f)

λ‹¤μμΌλ΅ str2μ— μ§§μ€ λ¬Έμμ—΄μ„ ν• λ‹Ήν•΄μ£Όμ ν™ μμ—­μ μ£Όμ†κ°€ λ°”λ€ κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>
κ·Έλ¦¬κ³  μ§§μ€ λ¬Έμμ—΄μ„ λ„£μ–΄μ£Όμ—κΈ° λ•λ¬Έμ— μ¤νƒ μμ—­μ— κ°’μ΄ μ €μ¥λ κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>

μ–΄λ–»κ² ν•λ©΄ μ΄λ ‡κ² μ λ™μ μΌλ΅ ν™ μμ—­μ„ ν™μ©ν•  μ μλ” κ±ΈκΉμ”? μ΄ λ¬Έμ λ” SILλ¥Ό ν™μ©ν•΄μ„ μΆ€ λ” μμ„Έν ν™•μΈν•  μ μμ—μµλ‹λ‹¤.<br>

### SILλ€?
Swift μ»΄νμΌλ¬κ°€ μ‚¬μ©ν•λ” μ¤‘κ°„ ν‘ν„μΌλ΅, Swift μ½”λ“κ°€ μ‹¤ν–‰ κ°€λ¥ν• λ°”μ΄λ„λ¦¬ μ½”λ“λ΅ λ³€ν™λκΈ° μ „μ— κ±°μΉλ” μ¤‘κ°„ λ‹¨κ³„ μ–Έμ–΄μ…λ‹λ‹¤.<br>

ν„°λ―Έλ„μ—μ„ swiftc -emit-sil λ…λ Ήμ–΄λ¥Ό ν†µν•΄ SIL μ½”λ“λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.<br>

<br>

```
%0 = alloc_stack [var_decl] $String, var, name "str1", type $String // users: %7, %47, %46, %14, %25
%1 = string_literal utf8 "AAAA"                 // user: %6
%2 = integer_literal $Builtin.Word, 4           // user: %6
%3 = integer_literal $Builtin.Int1, -1          // user: %6
%4 = metatype $@thin String.Type                // user: %6
  // function_ref String.init(_builtinStringLiteral:utf8CodeUnitCount:isASCII:)
%5 = function_ref @$sSS21_builtinStringLiteral17utf8CodeUnitCount7isASCIISSBp_BwBi1_tcfC : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // user: %6
 %6 = apply %5(%1, %2, %3, %4) : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // user: %7
 store %6 to %0 : $*String                       // id: %7
```
μ„ λ‚΄μ©μ„ μ‚΄μ§ μ‚΄ν΄λ³΄λ©΄ %0μ—μ„ μ¤νƒ μμ—­μ— varλΌλ” μ΄λ¦„μ κ³µκ°„μ΄ ν• λ‹Ήλκ³ , κ·Έ λ’¤λ΅λ” μ…λ ¥ν•΄μ¤€ Stringμ λ©”νƒ€ λ°μ΄ν„°μ™€ κ΄€λ ¨λ μ‘μ—…λ“¤μ΄ μ΄λ£¨μ–΄μ§€λ” κ²ƒ κ°™μµλ‹λ‹¤.<br>
κ²°κ³Όμ μΌλ΅ applyλ¥Ό ν†µν•΄ %6μ— μ§€μ •ν•΄μ£Όλ”λ°, μ—¬κΈ°μ„ applyλ” ν•¨μλ¥Ό νΈμ¶ν•λ” κ²ƒμΌλ΅ %5(%1, %2, %3, %4)λ¥Ό νΈμ¶ν• κ²ƒμΌλ΅ λ³΄μ…λ‹λ‹¤.<br>
sSS21_builtinStringLiteral17utf8CodeUnitCount7isASCIISSBp_BwBi1_tcfCμ΄ Stringμ„ μƒμ„±ν•λ” λΉνΈμΈ ν•¨μμ΄λ―€λ΅ Stringμ„ μƒμ„±ν•λ” μ‘μ—…μ„ ν• λ’¤ κ²°κ³Ό Stringμ„ %6μ— λ„£μ–΄μ¤€ κ²ƒμ…λ‹λ‹¤.<br>
μ΄ κ³Όμ •μ—μ„ λ§μ§€λ§‰μ— μ¤νƒ μμ—­μ— μƒμ„±ν• λ¬Έμμ—΄μ„ λ„£μ–΄μ£Όκ³  μμΌλ―€λ΅ μ¤νƒμ—μ„ λ¬Έμμ—΄ κ°’μ„ ν™•μΈν•  μ μμ—μµλ‹λ‹¤.<br>

```
%8 = string_literal utf8 "AAAAAAAAAA"           // user: %13
%9 = integer_literal $Builtin.Word, 10          // user: %13
%10 = integer_literal $Builtin.Int1, -1         // user: %13
%11 = metatype $@thin String.Type               // user: %13
  // function_ref String.init(_builtinStringLiteral:utf8CodeUnitCount:isASCII:)
%12 = function_ref @$sSS21_builtinStringLiteral17utf8CodeUnitCount7isASCIISSBp_BwBi1_tcfC : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // user: %13
%13 = apply %12(%8, %9, %10, %11) : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // user: %16
%14 = begin_access [modify] [static] %0 : $*String // users: %16, %15, %18
%15 = load %14 : $*String                       // user: %17
store %13 to %14 : $*String                     // id: %16
release_value %15 : $String                     // id: %17
end_access %14 : $*String                       // id: %18
```
λ³€μμ— μƒλ΅μ΄ λ¬Έμμ—΄μ„ λ€μ…ν•λ©΄, μ•μ κ³Όμ •κ³Ό λ™μΌν•κ² ν™ μμ—­μ—μ„ λ¬Έμμ—΄μ„ μƒμ„±ν•κ³  μ΄λ¥Ό μ¤νƒ μμ—­μΌλ΅ λ³µμ‚¬ν•©λ‹λ‹¤.<br>

```
%19 = string_literal utf8 "ADJISJDLDNFLSKFMNDLS" // user: %24
%20 = integer_literal $Builtin.Word, 20         // user: %24
%21 = integer_literal $Builtin.Int1, -1         // user: %24
%22 = metatype $@thin String.Type               // user: %24
  // function_ref String.init(_builtinStringLiteral:utf8CodeUnitCount:isASCII:)
%23 = function_ref @$sSS21_builtinStringLiteral17utf8CodeUnitCount7isASCIISSBp_BwBi1_tcfC : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // user: %24
%24 = apply %23(%19, %20, %21, %22) : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // users: %32, %28, %26
%25 = begin_access [modify] [static] %0 : $*String // users: %28, %27, %30
retain_value %24 : $String                      // id: %26
%27 = load %25 : $*String                       // user: %29
store %24 to %25 : $*String                     // id: %28
release_value %27 : $String                     // id: %29
end_access %25 : $*String                       // id: %30
```
λ‹¤μμ€ λ” κΈ΄ λ¬Έμμ—΄μ„ λ€μ…ν–μ„ λ• μ…λ‹λ‹¤.<br>
μ΄ κ²½μ°μ—λ„ λ™μΌν•κ² λ¬Έμμ—΄μ„ μƒμ„±ν•μ§€λ§, λ‹¤λ¥Έ μ μ€ retain_valueλ¥Ό ν†µν•΄ μ°Έμ΅° μΉ΄μ΄νΈκ°€ μ¦κ°€λμ—μµλ‹λ‹¤.<br>
λ”°λΌμ„ ν™ μμ—­μ—μ„ μƒμ„±ν• Stringμ— λ€ν• μ°Έμ΅°λ¥Ό ν™•λ³΄ν•μ—¬ Stringμ΄ ν™ μμ—­μ—μ„ μ‚¬λΌμ§€μ§€ μ•μµλ‹λ‹¤.<br>

μ΄μ— λ”°λΌ Stringμ€ κ°’ νƒ€μ…μ΄μ§€λ§ μ°Έμ΅° νƒ€μ…μ²λΌ λ™μ‘ν•λ” κ²½μ°λ„ μλ‹¤λ” μ‚¬μ‹¤μ„ μ•κ² λμ—μµλ‹λ‹¤.<br>

<br>

## 5. Array νƒ€μ… ν™•μΈν•κΈ°
```swift
var array1: [Int] = [1, 2, 3, 4, 5]
var array2 = array1
array2.append(10)
array1.append(7)
```
λ‹¤μμ€ Array νƒ€μ…μ„ ν™•μΈν•΄ λ³΄μ•μµλ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/c4319a1e-6dcf-493d-bfe0-76aefd2b41f5)

Arrayλ¥Ό μƒμ„±ν•κ³  λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό ν™•μΈν•΄λ³΄λ©΄, μ¤νƒμ— μ €μ¥λ κ°’μ€ ν™ μμ—­μ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤κ³  μμμ„ μ• μ μμµλ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/bcf75f39-612f-41a4-9403-25ccbd6d0bf3)

κ·Έλ¦¬κ³  ν™ λ©”λ¨λ¦¬λ¥Ό ν™•μΈν•΄λ³΄λ©΄ μ •μ λ°μ΄ν„°κ°€ μ €μ¥λμ–΄ μμµλ‹λ‹¤.<br>

μ΄μ— λ”°λΌ Arrayλ” ν™μ— μ €μ¥λκ³ , μ¤νƒμ—μ„λ” μ΄λ¥Ό μ°Έμ΅°ν•κ³  μλ‹¤λ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/8191e0a1-dfe1-4552-b631-72f6e31e59f3)

array2μ—λ„ κΈ°μ΅΄μ λ°°μ—΄μ„ ν• λ‹Ήν•΄μ£Όλ©΄, μ¤νƒ μμ—­μ—μ„ λ™μΌν• μ°Έμ΅°λ¥Ό κ°€λ¦¬ν‚¤λ„λ΅ λμ–΄ μμµλ‹λ‹¤.<br>
κ°’ νƒ€μ…μ΄λΌκ³  λ¬΄μ΅°κ±΄ λ³µμ‚¬λλ” κ²ƒμ΄ μ•„λ‹λΌ, μ΄λ²μ—λ„ μ°Έμ΅°λ¥Ό μ „λ‹¬ν•©λ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/2b84dee9-52b2-4b04-b643-00036b8aa64e)

μ΄λ• κ°’μ„ λ°”κΏ”μ£Όλ©΄ μ„μ™€ κ°™μ΄ μƒλ΅μ΄ ν™ μ£Όμ†κ°€ ν• λ‹Ήλ©λ‹λ‹¤.<br>

κ·Έλ ‡λ‹¤λ©΄, Arrayλ” μ–΄λ–»κ² κ°’μ„ κ³„μ† μ¶”κ°€ν•  μ μλ” κ±ΈκΉμ”?<br>

```swift
func intTest() {
    var array: [Int] = [1, 2, 3]
    
    for i in 0..<500 {
        array.append(i)
    }
}
```
μ„μ™€ κ°™μ΄ λ°°μ—΄μ— μ§€μ†μ μΌλ΅ κ°’μ„ μ¶”κ°€ν•λ©΄μ„ λ©”λ¨λ¦¬ μμ—­μ λ³€ν™”λ¥Ό ν™•μΈν•΄λ³΄μ•μµλ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/1d5648d4-e67d-4fdd-96e3-40587f42c6bc)

μ •λ¦¬ν•΄λ³΄λ©΄ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.<br>

```
0x0000600000edc170: 0~4
0x00006000010d8020: 5~14
0x00000001227059a0: 15~34
0x0000000122705b00: 35~74
0x0000000124008220: 75~182
0x0000000124808220: 183~374
0x000000012280a620: 375~...
```

μ΄ κ²°κ³Όλ¥Ό ν†µν•΄ ν™ μμ—­μ— μƒλ΅μ΄ ν• λ‹Ήμ΄ μ΄λ£¨μ–΄μ§€λ” κ²ƒμ€ μ„ ν•μ μ΄μ§€ μ•κ³  μ§€μ ν•νƒλ΅ μ¦κ°€ν•λ‹¤λ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>
μ΄λ” appendμ λ™μ‘κ³Ό κ΄€λ ¨μ΄ μμµλ‹λ‹¤. <br>

| λ°°μ—΄μ€ ν• λ‹Ήλ μ©λ‰μ„ μ§€μμ μΌλ΅ μ¦κ°€μ‹ν‚¤λ” μ „λµμ„ μ‚¬μ©ν•κΈ° λ•λ¬Έμ—, append(_:) λ©”μ„λ“λ¥Ό μ—¬λ¬ λ² νΈμ¶ν•λ” κ²½μ° λ‹¨μΌ μ”μ†λ¥Ό μ¶”κ°€ν•λ” μ—°μ‚°μ ν‰κ·  μ‹κ°„ λ³µμ΅λ„λ” O(1)μ΄λ‹¤. λ°°μ—΄μ— μ¶”κ°€μ μΈ μ©λ‰μ΄ μμΌλ©°, λ‹¤λ¥Έ μΈμ¤ν„΄μ¤μ™€ μ €μ¥ κ³µκ°„μ„ κ³µμ ν•μ§€ μ•λ” κ²½μ° μ”μ†λ¥Ό μ¶”κ°€ν•λ” κ²ƒμ€ O(1)μ΄λ‹¤. ν•μ§€λ§, λ°°μ—΄μ΄ μ”μ†λ¥Ό μ¶”κ°€ν•κΈ° μ „μ— μ €μ¥ κ³µκ°„μ„ μ¬ν• λ‹Ήν•΄μ•Ό ν•κ±°λ‚, μ €μ¥ κ³µκ°„μ΄ λ‹¤λ¥Έ λ³µμ‚¬λ³Έκ³Ό κ³µμ λλ” κ²½μ°μ—λ” O(n)μ μ‹κ°„ λ³µμ΅λ„λ¥Ό κ°–κ² λλ©°, μ—¬κΈ°μ„ nμ€ λ°°μ—΄μ κΈΈμ΄μ΄λ‹¤.
[μ¶μ²](https://developer.apple.com/documentation/swift/array/append(_:)-1ytnt)

μ„ λ‚΄μ©μ— λ”°λΌμ„ λ°°μ—΄μ μ©λ‰μ΄ κ°€λ“ μ°¨κ² λλ©΄ ν™ μ €μ¥ κ³µκ°„μ„ μ¬ν• λ‹Ήν•μ—¬ λ™μ μΌλ΅ ν• λ‹Ήμ΄ κ°€λ¥ν• κ²ƒμΌλ΅ λ³΄μ…λ‹λ‹¤.<br>
κ·Έλ ‡λ‹¤λ©΄ μ¬ν• λ‹Ή μ΄ν›„ κ³µκ°„κ³Ό κΈ°μ΅΄ κ³µκ°„μ€ μ–΄λ–¤ λ¨μµμΌκΉμ”?<br>

![image](https://github.com/user-attachments/assets/5f4f6122-96a9-4289-849f-5f8818baf8dd)

μ„μ²λΌ μ¬ν• λ‹Ήμ΄ μ΄λ£¨μ–΄μ§€λ©΄ κΈ°μ΅΄μ κ³µκ°„μ„ λΉ„μ›μ£Όλ” λ™μ‘μ„ ν•΄μ£Όλ” κ²ƒ κ°™μµλ‹λ‹¤.<br>
μ΄λ¥Ό ν†µν•΄ Swiftκ°€ μ–΄λ–¤ μ‹μΌλ΅ λ°°μ—΄μ λ™μ  ν• λ‹Ήμ„ μµμ ν™”ν•κ³  μλ”μ§€ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>

<br>

## 6. κ°„λ‹¨ν• Class νƒ€μ… ν™•μΈν•κΈ°
```swift
class Point {
    var x: Int = 0
    var y: Int = 0
}

...

var point1 = Point()
point1.x = 15
var point2 = point1
```

λ‹¤μμ€ κ°„λ‹¨ν• ν΄λμ¤λ¥Ό μ‘μ„±ν•μ—¬ ν…μ¤νΈ ν•μ€μµλ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/40062ab1-6935-4abc-bfe5-5cba4a167b58)

ν΄λμ¤μ κ²½μ°, μƒμ„±ν•λ©΄ Stack μμ—­κ³Ό Heap μμ—­μ„ λ¨λ‘ μ‚¬μ©ν•©λ‹λ‹¤.<br>
μ΄λ• Stack μμ—­μ—λ” Heap μμ—­μ„ κ°€λ¦¬ν‚¤λ” μ£Όμ†κ°’μ΄ λ“¤μ–΄μμµλ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/809bca1d-2fbe-461c-b545-5dc55a952ee2)

κ°’μ„ λ³€κ²½ν•΄λ„ λ§μ°¬κ°€μ§€λ΅, μ¤νƒ μμ—­κ³Ό ν™ μμ—­μ μ£Όμ†κ°’μ€ λ³€ν•μ§€ μ•μ•μµλ‹λ‹¤.<br>
λ‹¤λ§ ν™ μμ—­μ— λ³€κ²½ν• κ°’ 15κ°€ 0fλ΅ λ³€κ²½λμ–΄ μμµλ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/e6fc554a-aea4-48d6-9e4c-8e208ee3b705)

μƒλ΅μ΄ κ°’μ— κΈ°μ΅΄μ ν΄λμ¤ μΈμ¤ν„΄μ¤λ¥Ό λ€μ…ν•΄μ£Όλ©΄ μ¤νƒ μμ—­μ μ£Όμ†λ§ λ°”λ€κ³  ν™ μμ—­μ μ£Όμ†λ” κ³µμ ν•λ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>
λ‘ μ¤νƒ μμ—­μ μ£Όμ† μ°¨μ΄λ” λ”± 8λ°”μ΄νΈ λ§νΌμΌλ΅, memory readμ—μ„λ„ μ°¨λ΅€λ΅ μ €μ¥λμ–΄ μμµλ‹λ‹¤.

<br>

## 7. κ°„λ‹¨ν• Struct νƒ€μ… ν™•μΈν•κΈ°
```swift
struct Point {
    var x: Int = 0
    var y: Int = 0
}

...

var point1 = Point()
var point2 = point1
point2.x = 15
```

![image](https://github.com/user-attachments/assets/fadfa6f9-bc1c-417a-9117-7127bf39dd7d)


κ°„λ‹¨ν• Structμ κ²½μ° μ¤νƒμ— κ°’μ΄ μ €μ¥λλ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>
μ΄λ¥Ό λ‹¤λ¥Έ λ³€μμ— ν• λ‹Ήν•λ©΄ κ°’μ΄ λ³µμ‚¬λκ³ , μ¤νƒ λ©”λ¨λ¦¬ μμ—­μ„ μƒλ΅­κ² ν• λ‹Ήλ°›κ² λ©λ‹λ‹¤.<br>
ν™•μΈν•΄λ³΄λ©΄, κ°’μ΄ λ³µμ‚¬λμ—κΈ° λ•λ¬Έμ— κΈ°μ΅΄ μ£Όμ†λ” κ°’μ λ³€λ™μ΄ μ—†λ‹¤λ” κ²ƒμ„ μ• μ μμµλ‹λ‹¤.<br>

<br>

## 8. Structλ¥Ό κ°€μ§€κ³  μλ” Class νƒ€μ…

μ΄λ²μ—λ” μ¤‘μ²© κµ¬μ΅°λ¥Ό κ°€μ§„ νƒ€μ…μ…λ‹λ‹¤!<br>
ν΄λμ¤ μ•μ— κµ¬μ΅°μ²΄κ°€ μλ‹¤λ©΄, μ΄ κµ¬μ΅°μ²΄λ” μ–΄λ””μ— μ €μ¥λ κΉμ”?<br>

```swift
var a = A(X(17))
var b = a
b.x = X(20)
```

λ™μΌν• ν΄λμ¤ μΈμ¤ν„΄μ¤λ¥Ό a, bμ— λ„£μ–΄μ£Όκ³ , bμ—μ„ κµ¬μ΅°μ²΄μ κ°’μ„ λ‹¤λ¥Έ κ²ƒμΌλ΅ λ³€κ²½ν–μµλ‹λ‹¤.<br>

μ„μ—μ„ λ‚μ™”λ κ²°κ³Όμ™€ λ™μΌν•κ², a, bλ” μ¤νƒ μ£Όμ†λ” λ‹¤λ¥΄μ§€λ§ λ™μΌν• ν΄λμ¤ μΈμ¤ν„΄μ¤μ— λ€ν• μ°Έμ΅°λ¥Ό κ°€μ§€κ³  μμµλ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/00d33937-5124-4ab3-a311-a39255b4ddd7)

μ΄ μ°Έμ΅°μ κµ¬μ΅°μ²΄ κ°’μ„ λ³€κ²½ν•΄λ³΄λ©΄ μ„κ³Ό κ°™μµλ‹λ‹¤.<br>
ν™ μμ—­μ ν΄λμ¤ μΈμ¤ν„΄μ¤μ κ°’μ΄ 11μ—μ„ 14λ΅ λ³€κ²½λμ—μµλ‹λ‹¤.<br>
μ¦‰ κΈ°μ΅΄μ— aλ¥Ό μƒμ„±ν•  λ• λ„£μ–΄μ¤€ 17μ κ°’μ΄ 20μΌλ΅ λ³€κ²½λ κ²ƒμ΄μ£ .<br>
μ΄μ— λ”°λΌμ„ ν΄λμ¤ μ•μ— μ €μ¥λ κµ¬μ΅°μ²΄ ν”„λ΅νΌν‹°λ” ν™ μμ—­μ—μ„ κ΄€λ¦¬λλ‹¤κ³  μƒκ°ν•  μ μμµλ‹λ‹¤. (μΌλ°μ μΈ κ²½μ°)<br>

<br>

## 9. Classλ¥Ό κ°€μ§€κ³  μλ” Struct νƒ€μ…
μ΄λ²μ—λ” κµ¬μ΅°μ²΄ μ•μ— μ°Έμ΅° νƒ€μ…μ„ λ„£μ–΄λ³΄κ² μµλ‹λ‹¤.<br>
```swift
var a = A(X(17))
var b = a
b.x = X(20)
```

![image](https://github.com/user-attachments/assets/9f0d97e3-3c06-4981-bd4b-c0a9672a3ace)

μƒμ„±ν• ν΄λμ¤ μΈμ¤ν„΄μ¤λ¥Ό λ‹¤λ¥Έ λ³€μμ— λ„£μ–΄μ£Όλ©΄, ν΄λμ¤μ μ°Έμ΅°λ¥Ό κ³µμ ν•©λ‹λ‹¤. (μ¤νƒ μμ—­μ€ λ³„λ„μ…λ‹λ‹¤.)<br>
λ™μΌν• μ°Έμ΅°λ¥Ό κ³µμ ν•κ³  μμΌλ‹, ν• κ³³μ—μ„μ λ³€κ²½ μ‚¬ν•­μ΄ λ‹¤λ¥Έ κ³³μ— λ°μλκ² μ£ ?<br>

![image](https://github.com/user-attachments/assets/0b112893-e77b-4e7a-aa56-ce4e524953b4)

μ°Έμ΅° μμ²΄λ¥Ό μƒλ΅μ΄ κ°’μΌλ΅ λ€μ…ν•κ² λλ©΄, a, bλ” κµ¬μ΅°μ²΄μ΄λ―€λ΅ κ²°κ³Όμ μΌλ΅λ” bμ μ°Έμ΅° κ°’λ§ λ°”λ€κ³  aλ” κΈ°μ΅΄μ μ°Έμ΅°λ¥Ό μ μ§€ν•κ³  μμµλ‹λ‹¤.<br>

μ΄λ ‡κ² μ°Έμ΅° κ°’μ„ κ³µμ ν•κ² λλ©΄, κ²°κµ­ Structλ¥Ό λ³µμ‚¬ν•  λ•λ§λ‹¤ ν™ μμ—­μ reference countλ¥Ό μ¦κ°€μ‹ν‚¤κ² λ©λ‹λ‹¤.<br>
μ΄κ²ƒμ΄ μ• ν”μ—μ„ λ§ν–λ μ°Έμ΅° μΉ΄μ΄ν… μ¤λ²„ν—¤λ“μ λ¬Έμ λΌκ³  μƒκ°λ©λ‹λ‹¤.<br>

<br>

## λ²μ™Έ. Dictionaryμ λ™μ‘
ν•­μƒ λ‹Ήμ—°ν•λ‹¤λ” λ“―μ΄ λ”•μ…”λ„λ¦¬λ¥Ό μ‚¬μ©ν•κ³  μμ§€λ§ λ‚΄λ¶€μ μΌλ΅ μ–΄λ–»κ² λ™μ‘ν•λ”μ§€ λ§‰μ—°ν–κΈ° λ•λ¬Έμ— Dictionaryμ λ™μ‘λ„ ν™•μΈν•΄λ³΄κ³ μ ν•©λ‹λ‹¤.<br>

```swift
var cache = [String: Int]()
cache["iOS"] = 1
cache["Android"] = 2
cache["Linux"] = 3
...
var a = cache["iOS"]
```

![image](https://github.com/user-attachments/assets/1f2cbdfe-1b28-46d8-b256-afbe3ac4221a)

λ”•μ…”λ„λ¦¬λ¥Ό μƒμ„±ν•κ³  κ°’μ„ λ³€κ²½ν•΄λ„ μ¤νƒ μμ—­μ— ν• λ‹Ήλ μ£Όμ†λ” λ°”λ€μ§€ μ•μµλ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/327bf4e7-0bec-4fee-a3a1-2ae54251eeb7)

λ”•μ…”λ„λ¦¬μ μ¤νƒ λ©”λ¨λ¦¬ μ£Όμ†λ³΄λ‹¤ μ• μμ—­μ„ ν™•μΈν•΄λ³΄λ©΄ μ„μ™€ κ°™μ΄ ν‚¤ κ°’μ΄ μ €μ¥λμ–΄ μμµλ‹λ‹¤.<br>

λ”•μ…”λ„λ¦¬μ— μ €μ¥λ λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό ν™•μΈν•΄λ³΄λ©΄ heap μμ—­μΈλ°, μ΄λ¥Ό ν™•μΈν•΄λ³΄λ©΄ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.<br>

![image](https://github.com/user-attachments/assets/a153fa81-e5ca-41d1-80a3-82afafa046f3)

μ•„κΉ μ§€μ •ν•΄ μ¤€ ν‚¤κ°€ λ“¤μ–΄κ°€ μλ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>
ν‚¤μ—λ” μμ„κ°€ μ—†λ” λ§νΌ, λλ¤ν•κ² λ“¤μ–΄κ°€ μλ” κ²ƒ κ°™μµλ‹λ‹¤.<br>
μ™ ν™ μμ—­κ³Ό μ¤νƒ μμ—­ λ¨λ‘ ν‚¤ κ°’μ΄ λ³΄μ΄λ”μ§€, κ·Έλ¦¬κ³  μ •ν™•ν•κ² κ°’μ€ μ–΄λ””μ— μ €μ¥λλ”μ§€ ν™•μ‹¤ν μ•μ•„λ‚΄μ§€λ” λ»ν–μµλ‹λ‹¤. γ… γ…  (μ•„μ‹λ” λ¶„μ΄ μλ‹¤λ©΄ μ•λ ¤μ£Όμ„Έμ”!)<br>


```
%0 = alloc_stack [var_decl] $Dictionary<String, Int>, var, name "cache", type $Dictionary<String, Int> // users: %8, %143, %142, %22, %41, %60, %79, %135
%1 = integer_literal $Builtin.Word, 0           // user: %3
  // function_ref _allocateUninitializedArray<A>(_:)
%2 = function_ref @$ss27_allocateUninitializedArrayySayxG_BptBwlF : $@convention(thin) <Ο„_0_0> (Builtin.Word) -> (@owned Array<Ο„_0_0>, Builtin.RawPointer) // user: %3
%3 = apply %2<(String, Int)>(%1) : $@convention(thin) <Ο„_0_0> (Builtin.Word) -> (@owned Array<Ο„_0_0>, Builtin.RawPointer) // user: %4
%4 = tuple_extract %3 : $(Array<(String, Int)>, Builtin.RawPointer), 0 // user: %7
%5 = metatype $@thin Dictionary<String, Int>.Type // user: %7
  // function_ref Dictionary.init(dictionaryLiteral:)
%6 = function_ref @$sSD17dictionaryLiteralSDyxq_Gx_q_td_tcfC : $@convention(method) <Ο„_0_0, Ο„_0_1 where Ο„_0_0 : Hashable> (@owned Array<(Ο„_0_0, Ο„_0_1)>, @thin Dictionary<Ο„_0_0, Ο„_0_1>.Type) -> @owned Dictionary<Ο„_0_0, Ο„_0_1> // user: %7
%7 = apply %6<String, Int>(%4, %5) : $@convention(method) <Ο„_0_0, Ο„_0_1 where Ο„_0_0 : Hashable> (@owned Array<(Ο„_0_0, Ο„_0_1)>, @thin Dictionary<Ο„_0_0, Ο„_0_1>.Type) -> @owned Dictionary<Ο„_0_0, Ο„_0_1> // user: %8
store %7 to %0 : $*Dictionary<String, Int>      // id: %8
```
λ”•μ…”λ„λ¦¬λ¥Ό μƒμ„±ν•  λ• μΌμ–΄λ‚λ” μΌλ“¤μ…λ‹λ‹¤.<br>
λ”•μ…”λ„λ¦¬λ¥Ό μƒμ„±ν•κ³  μ¤νƒ μμ—­μ„ ν™•λ³΄ν•΄μ„ μ΄λ¥Ό μ €μ¥ν•λ” κ³Όμ •μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.<br>


```
%9 = string_literal utf8 "iOS"                  // user: %14
%10 = integer_literal $Builtin.Word, 3          // user: %14
%11 = integer_literal $Builtin.Int1, -1         // user: %14
%12 = metatype $@thin String.Type               // user: %14
  // function_ref String.init(_builtinStringLiteral:utf8CodeUnitCount:isASCII:)
%13 = function_ref @$sSS21_builtinStringLiteral17utf8CodeUnitCount7isASCIISSBp_BwBi1_tcfC : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // user: %14
%14 = apply %13(%9, %10, %11, %12) : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // user: %21
%15 = integer_literal $Builtin.Int64, 1         // user: %16
%16 = struct $Int (%15 : $Builtin.Int64)        // user: %17
%17 = enum $Optional<Int>, #Optional.some!enumelt, %16 : $Int // user: %19
%18 = alloc_stack $Optional<Int>                // users: %19, %27, %24
store %17 to %18 : $*Optional<Int>              // id: %19
%20 = alloc_stack $String                       // users: %21, %26, %24
store %14 to %20 : $*String                     // id: %21
%22 = begin_access [modify] [static] %0 : $*Dictionary<String, Int> // users: %25, %24
  // function_ref Dictionary.subscript.setter
%23 = function_ref @$sSDyq_Sgxcis : $@convention(method) <Ο„_0_0, Ο„_0_1 where Ο„_0_0 : Hashable> (@in Optional<Ο„_0_1>, @in Ο„_0_0, @inout Dictionary<Ο„_0_0, Ο„_0_1>) -> () // user: %24
%24 = apply %23<String, Int>(%18, %20, %22) : $@convention(method) <Ο„_0_0, Ο„_0_1 where Ο„_0_0 : Hashable> (@in Optional<Ο„_0_1>, @in Ο„_0_0, @inout Dictionary<Ο„_0_0, Ο„_0_1>) -> ()
end_access %22 : $*Dictionary<String, Int>      // id: %25
dealloc_stack %20 : $*String                    // id: %26
dealloc_stack %18 : $*Optional<Int>             // id: %27
```
μ΄ λ¶€λ¶„μ€ "iOS" ν‚¤ κ°’μ— 1μ„ μ €μ¥ν•  λ• μΌμ–΄λ‚λ” μΌλ“¤μ…λ‹λ‹¤.<br>
μ°μ„  String ν‚¤μ™€ Intλ¥Ό μƒμ„±ν•΄μ„ μ¤νƒ μμ—­μ— μ €μ¥ν•κ³ , Dictionaryμ setterλ¥Ό μ‚¬μ©ν•΄μ„ κ°’μ„ μ €μ¥ν• λ’¤ ν• λ‹Ήν–λ μ¤νƒ μμ—­μ„ ν•΄μ ν•©λ‹λ‹¤.<br>
νΉμ΄ν• κ²ƒμ€ μ΄λ• Intκ°€ κ·Έλƒ¥ μ €μ¥λλ” κ²ƒμ΄ μ•„λ‹λΌ Optional<Int>κ°€ μ €μ¥λ©λ‹λ‹¤. (λ”•μ…”λ„λ¦¬μ—μ„ κ°’μ„ μ–»λ” λ™μ‘μ΄ μµμ…”λ„μ΄μ–΄μ„ μ΄λ ‡κ² ν•΄μ£Όλ” κ²ƒ κ°™μµλ‹λ‹¤.)<br>

```
%66 = alloc_stack [var_decl] $Optional<Int>, var, name "a", type $Optional<Int> // users: %82, %78
  %67 = string_literal utf8 "iOS"                 // user: %72
  %68 = integer_literal $Builtin.Word, 3          // user: %72
  %69 = integer_literal $Builtin.Int1, -1         // user: %72
  %70 = metatype $@thin String.Type               // user: %72
  // function_ref String.init(_builtinStringLiteral:utf8CodeUnitCount:isASCII:)
  %71 = function_ref @$sSS21_builtinStringLiteral17utf8CodeUnitCount7isASCIISSBp_BwBi1_tcfC : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // user: %72
  %72 = apply %71(%67, %68, %69, %70) : $@convention(method) (Builtin.RawPointer, Builtin.Word, Builtin.Int1, @thin String.Type) -> @owned String // user: %76
  %73 = begin_access [read] [static] %0 : $*Dictionary<String, Int> // users: %74, %81
  %74 = load %73 : $*Dictionary<String, Int>      // user: %78
  %75 = alloc_stack $String                       // users: %76, %80, %79, %78
  store %72 to %75 : $*String                     // id: %76
  // function_ref Dictionary.subscript.getter
  %77 = function_ref @$sSDyq_Sgxcig : $@convention(method) <Ο„_0_0, Ο„_0_1 where Ο„_0_0 : Hashable> (@in_guaranteed Ο„_0_0, @guaranteed Dictionary<Ο„_0_0, Ο„_0_1>) -> @out Optional<Ο„_0_1> // user: %78
  %78 = apply %77<String, Int>(%66, %75, %74) : $@convention(method) <Ο„_0_0, Ο„_0_1 where Ο„_0_0 : Hashable> (@in_guaranteed Ο„_0_0, @guaranteed Dictionary<Ο„_0_0, Ο„_0_1>) -> @out Optional<Ο„_0_1>
  destroy_addr %75 : $*String                     // id: %79
  dealloc_stack %75 : $*String                    // id: %80
  end_access %73 : $*Dictionary<String, Int>      // id: %81
  dealloc_stack %66 : $*Optional<Int>             // id: %82
  destroy_addr %0 : $*Dictionary<String, Int>     // id: %83
  dealloc_stack %0 : $*Dictionary<String, Int>    // id: %84
  %85 = tuple ()                                  // user: %86
  return %85 : $()                                // id: %86
```
κ°’μ„ κΊΌλ‚΄μ„ aλΌλ” λ³€μμ— λ„£λ” κ³Όμ •λ„ getterλ¥Ό ν†µν•΄ μ΄λ£¨μ–΄μ§‘λ‹λ‹¤.<br>

μ΄λ¬ν• λ”•μ…”λ„λ¦¬μ— κ°’μ„ λ„£μ„ λ• μ¤‘μ”ν• μ μ΄ μμµλ‹λ‹¤.<br>
λ°”λ΅ κ°’ λλ” ν‚¤κ°€ κ°•ν• μ°Έμ΅°λ¥Ό κ°€μ§ μ μλ‹¤λ” μ μ…λ‹λ‹¤.<br>

```swift
var cache: [String: Person] = [:]
    
var person1: Person? = Person(name: "Jake", age: 10)
    
cache["person1"] = person1
    
print(">>> nilλ΅ μ„¤μ •ν•©λ‹λ‹¤.")
person1 = nil
    
print(">>> λ”•μ…”λ„λ¦¬μ—μ„ κ°’μ„ μ κ±°ν–μµλ‹λ‹¤.")
cache.removeValue(forKey: "person1")
```
μ΄ μ½”λ“μ μ‹¤ν–‰ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.<br>
```
>>> nilλ΅ μ„¤μ •ν•©λ‹λ‹¤.
>>> λ”•μ…”λ„λ¦¬μ—μ„ κ°’μ„ μ κ±°ν–μµλ‹λ‹¤.
>>> deinitμ΄ λ¶λ Έμµλ‹λ‹¤.
```
μ™ μ΄λ° μΌμ΄ μΌμ–΄λ‚ κΉμ”?<br>

![image](https://github.com/user-attachments/assets/c9752636-20eb-411e-963b-4feb27836a75)

μ €μ¥ν•λ ¤λ” κ°’μ΄ μ°Έμ΅° νƒ€μ…μ΄λ―€λ΅ μ„ κ·Έλ¦Όκ³Ό κ°™μ΄ μ™Έλ¶€μ— μλ” λ³€μ person1κ³Ό λ”•μ…”λ„λ¦¬ λ‚΄μ κ°’μ€ λ™μΌν• μ°Έμ΅°λ¥Ό κ³µμ ν•κ² λ©λ‹λ‹¤.<br>
λ”°λΌμ„ μ°Έμ΅° μΉ΄μ΄νΈκ°€ μ¬λΌκ°€κ² λ κ²ƒμ΄κ³ , ν•΄λ‹Ή μΈμ¤ν„΄μ¤λ¥Ό μ™„μ „ν ν•΄μ ν•λ ¤λ©΄ λ”•μ…”λ„λ¦¬μ— μ°Έμ΅°λ κ°’ λν• μ κ±°ν•΄μ£Όμ–΄μ•Ό ν•©λ‹λ‹¤.<br>

<br>

## λ§λ¬΄λ¦¬

μ΄λ ‡κ² λ‹¤μ–‘ν• νƒ€μ…λ“¤μ λ©”λ¨λ¦¬ κµ¬μ΅°μ™€ μ‘λ™ λ°©μ‹μ— λ€ν•΄ μ‚΄ν΄λ³΄μ•μµλ‹λ‹¤. (λ€λ¶€λ¶„ μ¬ν„ν• κ²ƒμ΄κΈ΄ ν•μ§€λ§μ” π« )<br>
κ·Έλλ„ μ§μ ‘ ν•΄λ³΄λ‹ λ©”λ¨λ¦¬κ°€ μ–΄λ–»κ² λ™μ‘ν•λ”μ§€, μ–΄λ–¤ λ°©μ‹μΌλ΅ ν™•μΈν•΄λ³Ό μ μλ”μ§€ μ•κ² λ κ²ƒ κ°™μ•„μ„ μΆ‹μ€ κ²½ν—μ΄μ—μµλ‹λ‹¤. <br>
